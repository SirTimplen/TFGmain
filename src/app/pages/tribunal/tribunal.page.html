<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Tribunal</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Tribunal</ion-title>
    </ion-toolbar>
  </ion-header>
  <ion-list>
    <ion-item *ngFor="let tribunal of tribunales">
      <ion-label>
        <p><strong>Presidente:</strong> {{ tribunal.presidente }}</p>
        <p><strong>Secretario:</strong> {{ tribunal.secretario }}</p>
        <p><strong>Vocal:</strong> {{ tribunal.vocal }}</p>
        <p><strong>Suplente:</strong> {{ tribunal.suplente }}</p>
      </ion-label>
      <ion-button (click)="toggleDefensas(tribunal.id)">
        {{ tribunalSeleccionadoId === tribunal.id ? 'Ocultar Defensas' : 'Ver Defensas' }}
      </ion-button>
    </ion-item>
  </ion-list>

  <ion-card *ngIf="tribunalSeleccionadoId">
    <ion-card-header>
      <ion-card-title>Defensas del Tribunal</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let defensa of defensas">
  <ion-label>
    <p><strong>Alumno:</strong> {{ defensa.alumno }}</p>
    <p><strong>Fecha:</strong> {{ defensa.fecha | date:'dd/MM/yyyy HH:mm' }}</p>
    <p><strong>Lugar:</strong> {{ defensa.lugar }}</p>
    <p *ngIf="defensa.archivoUrl">
      <a [href]="defensa.archivoUrl" download>Descargar TFG</a>
    </p>
    <p *ngIf="defensa.nota !== null">
      <strong>Tu calificación:</strong> {{ defensa.nota | number:'1.2-2' }}
    </p>
  </ion-label>
  <ion-button (click)="toggleCalificar(defensa.id)">
    {{ defensaSeleccionadaId === defensa.id ? 'Ocultar Calificación' : 'Calificar' }}
  </ion-button>
</ion-item>
        
      </ion-list>
      <!-- Formulario de calificación -->
      <!-- ...existing code... -->
<!-- Formulario de calificación -->
<form *ngIf="defensaSeleccionadaId" (ngSubmit)="enviarCalificacion()">
  <ion-list>
    <ion-item>
      <ion-label>Acceder y recoger información</ion-label>
      </ion-item>
      <ion-item>
      <p>Utiliza fuentes de información variadas, válidas y fiables y selecciona la relevante para el objetivo del trabajo</p>
    </ion-item>
    <ion-item>
      <input type="number" min="0" max="10" [(ngModel)]="respuestas[0]" name="respuesta0" required style="width: 100%;"/>
    </ion-item>

    <ion-item>
      <ion-label>Integrar conocimientos previos</ion-label>
      </ion-item>
    <ion-item>
      <p>Toma decisiones adecuadas al contexto y
propone soluciones utilizando el conocimiento
Adquirido
</p>
</ion-item>
    <ion-item>
      <input type="number" min="0" max="10" [(ngModel)]="respuestas[1]" name="respuesta1" required style="width: 100%;"/>
    </ion-item>

    <ion-item>
      <ion-label>Detectar las oportunidades que ofrece un contexto </ion-label>
      </ion-item>
      <ion-item>
      <p>Detecta y analiza oportunidades para hacer nuevas
Propuestas
</p>
    </ion-item>
    <ion-item>
      <input type="number" min="0" max="10" [(ngModel)]="respuestas[2]" name="respuesta2" required style="width: 100%;"/>
    </ion-item>

    <ion-item>
      <ion-label>Proponer soluciones de calidad a situaciones complejas</ion-label>
      </ion-item>
      <ion-item>
      <p>Propone soluciones adecuadas y justifica las
decisiones tomadas para resolver problemas complejos
</p>
    </ion-item>
    <ion-item>
      <input type="number" min="0" max="10" [(ngModel)]="respuestas[3]" name="respuesta3" required style="width: 100%;"/>
    </ion-item>

    <ion-item>
      <ion-label>Documentar la gestión del proyecto </ion-label>
      </ion-item>
      <ion-item>
      <p>Utiliza recursos formales e informales para documentar
adecuadamente el proceso de desarrollo: concepción,
planificación, análisis, diseño, implementación, pruebas, etc.
</p>
    </ion-item>
    <ion-item>
      <input type="number" min="0" max="10" [(ngModel)]="respuestas[4]" name="respuesta4" required style="width: 100%;"/>
    </ion-item>

    <ion-item>
      <ion-label>Expresar ideas/conceptos de forma 
estructurada e inteligible, utilizando 
adecuadamente diferentes recursos 
(escrito)</ion-label>
</ion-item>
    <ion-item>
<p>Muestra claridad y comprensión en la redacción,
 organizando la información adecuadamente y
 utilizando los recursos adecuados para el
discurso escrito
</p>
    </ion-item>
    <ion-item>
      <input type="number" min="0" max="10" [(ngModel)]="respuestas[5]" name="respuesta5" required style="width: 100%;"/>
    </ion-item>

    <ion-item>
      <ion-label>Expresar ideas/conceptos de forma 
estructurada e inteligible, utilizando 
adecuadamente diferentes recursos 
(oral)
</ion-label>
</ion-item>
    <ion-item>
<p>Muestra claridad y comprensión en la expresión
 oral, organizando la información adecuadamente y
 utilizando los recursos adecuados para el
discurso oral
</p>
    </ion-item>
    <ion-item>
      <input type="number" min="0" max="10" [(ngModel)]="respuestas[6]" name="respuesta6" required style="width: 100%;"/>
    </ion-item>
  </ion-list>
  <ion-button expand="block" type="submit">Enviar Calificación</ion-button>
</form>
    </ion-card-content>
  </ion-card>
</ion-content>